/**
 * 闭包
 */
//Mozilla开发者文档的定义：闭包是指向独立变量的函数。即：在闭包中定义的函数会“记住”它创建时的环境。这里的【独立变量】可以理解为：在我们创建的字面作用域上持续存在的变量
function makeArmy() {
    var shootes = [];
    for (var i = 0; i < 10; i++) {
        var shoote = function () {
            alert(i);
        };
        shootes.push(shoote);
    }
    return shootes;
}
var army = makeArmy();
console.log(army[0]()); //10
console.log(army[5]()); //10
/*
上述情况出现闭包错误：声明一个shoote函数时，创建了一个闭包，那么赋值给shoote的函数都是闭包。他们包含自身的函数定义并保存了makeArmy的作用域环境。
所以，一共创建了10个闭包，而且他们共享同一个环境。当shoote函被执行时，函数中的循环已经执行完毕。i的值也变为10.
*/
// 解决上述问题，可以使用更多的闭包,
// 使用自执行函数创建一个新的作用域环境，在其中，i指向的是对应的期望值。
function makeArmy1() {
    var shootes = [];
    for (var i = 0; i < 10; i++) {
        (function (i) {
            var shoote = function () {
                console.log(i);
            };
            shootes.push(shoote);
        })(i);
    }
    return shootes;
}
var army = makeArmy1();
console.log(army[0]()); //0
console.log(army[5]()); //5
// 闭包和静态变量，使用闭包可以实现单例模式的效果。
// 在typescript的类中设置静态变量
var Counter = (function () {
    function Counter() {
    }
    Counter.prototype._changeBy = function (val) {
        Counter._counter += val;
    };
    Counter.prototype.increment = function () {
        this._changeBy(1);
    };
    Counter.prototype.decrement = function () {
        this._changeBy(-1);
    };
    Counter.prototype.vlaue = function () {
        return Counter._counter;
    };
    return Counter;
}());
Counter._counter = 0;
// 转换为javascript代码的效果是：
/*
var Counter = (function () {
    function Counter() {
    }
    Counter.prototype._changeBy = function (val) {
        Counter._counter += val;
    };
    Counter.prototype.increment = function () {
        this._changeBy(1);
    };
    Counter.prototype.decrement = function () {
        this._changeBy(-1);
    };
    Counter.prototype.vlaue = function () {
        return Counter._counter;
    };
    return Counter;
}());
Counter._counter = 0;
*/
// 使用闭包来模拟静态属性
var CounterClosure = (function () {
    var _counter = 0;
    function changeBy(val) {
        _counter += val;
    }
    function CounterClosure() { }
    CounterClosure.prototype.increment = function () {
        changeBy(1);
    };
    CounterClosure.prototype.decrement = function () {
        changeBy(-1);
    };
    CounterClosure.prototype.value = function () {
        return _counter;
    };
    return CounterClosure;
}());
// 上述代码中，CounterClosure构造函数，本身就是闭包的一部分。所以，所有的CounterClosure类的实例都共享同一个闭包的上下文，这就意味着counter变量和changeBy函数将会表现得如单例一样。
// 比如：CounterClosure类实例对象counter_1和counter_2会共享同一个作用域下的变量和方法，这里指的是counter和changeBy。
var counter_1 = new CounterClosure();
var counter_2 = new CounterClosure();
console.log(counter_1.value()); //0
console.log(counter_2.value()); //0
counter_1.increment();
counter_1.increment();
console.log(counter_1.value()); //2
console.log(counter_2.value()); //2,期望值是：0
counter_2.decrement();
console.log(counter_1.value()); //1
console.log(counter_2.value()); //1,期望值是：-1
// 闭包模拟类的私有成员
//注意：这里makerCounter函数不是自执行函数，这样，每次调用函数都会创建一个新的maCounter的实例，每个实例都包含一个新的闭包。由于闭包上下文不能直接访问到，所以，可以说变量counter和changeBy为私有变量
var makerCounter = function () {
    var _counter = 0;
    function changeBy(val) {
        _counter += val;
    }
    function maCounter() { }
    maCounter.prototype.increment = function () {
        changeBy(1);
    };
    maCounter.prototype.decrement = function () {
        changeBy(-1);
    };
    maCounter.prototype.value = function () {
        return _counter;
    };
    return new maCounter();
};
var counter_1 = makerCounter();
var counter_2 = makerCounter();
console.log(counter_1.value()); //0
console.log(counter_2.value()); //0
counter_1.increment();
counter_1.increment();
console.log(counter_1.value()); //2
console.log(counter_2.value()); //0

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy8wM19ydW50aW1lLzAzXzAyX2Nsb3N1cmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFDSCx5RkFBeUY7QUFFekY7SUFDSSxJQUFJLE9BQU8sR0FBRyxFQUFFLENBQUM7SUFDakIsR0FBRyxDQUFBLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUMsQ0FBQztRQUN4QixJQUFJLE1BQU0sR0FBRztZQUNULEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNiLENBQUMsQ0FBQTtRQUNELE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDekIsQ0FBQztJQUNELE1BQU0sQ0FBQyxPQUFPLENBQUM7QUFDbkIsQ0FBQztBQUVELElBQUksSUFBSSxHQUFHLFFBQVEsRUFBRSxDQUFDO0FBQ3RCLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBLElBQUk7QUFDM0IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUEsSUFBSTtBQUMzQjs7O0VBR0U7QUFFRixvQkFBb0I7QUFDcEIsc0NBQXNDO0FBQ3RDO0lBQ0ksSUFBSSxPQUFPLEdBQUcsRUFBRSxDQUFDO0lBQ2pCLEdBQUcsQ0FBQSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFDLENBQUM7UUFDeEIsQ0FBQyxVQUFTLENBQUM7WUFDUCxJQUFJLE1BQU0sR0FBRztnQkFDVCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO1lBQ2xCLENBQUMsQ0FBQTtZQUNELE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDekIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDVixD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QUNELHVCQUFzQixDQUFDO0lBRXZCLFNBQVMsQ0FBQyxTQUFTLENBQUMsU0FBUyxHQUFHO1FBQzVCLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNoQixDQUFDLENBQUM7SUFDRixTQUFTLENBQUMsU0FBUyxDQUFDLFNBQVMsR0FBRztRQUM1QixRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNqQixDQUFDLENBQUM7SUFDRixTQUFTLENBQUMsU0FBUyxDQUFDLEtBQUssR0FBRztRQUN4QixNQUFNLENBQUMsUUFBUSxDQUFDO0lBQ3BCLENBQUMsQ0FBQztJQUNGLE1BQU0sQ0FBQyxJQUFJLFNBQVMsRUFBRSxDQUFDO0FBQzNCLENBQUMsQ0FBQztBQUVGLElBQUksU0FBUyxHQUFHLFlBQVksRUFBRSxDQUFDO0FBQy9CLElBQUksU0FBUyxHQUFHLFlBQVksRUFBRSxDQUFDO0FBQy9CLE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUEsQ0FBQSxHQUFHO0FBQ2pDLE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUEsQ0FBQSxHQUFHO0FBRWpDLFNBQVMsQ0FBQyxTQUFTLEVBQUUsQ0FBQztBQUN0QixTQUFTLENBQUMsU0FBUyxFQUFFLENBQUM7QUFFdEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQSxDQUFBLEdBQUc7QUFDakMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQSxDQUFBLEdBQUciLCJmaWxlIjoiMDNfcnVudGltZS8wM18wMl9jbG9zdXJlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIOmXreWMhVxyXG4gKi9cclxuLy9Nb3ppbGxh5byA5Y+R6ICF5paH5qGj55qE5a6a5LmJ77ya6Zet5YyF5piv5oyH5ZCR54us56uL5Y+Y6YeP55qE5Ye95pWw44CC5Y2z77ya5Zyo6Zet5YyF5Lit5a6a5LmJ55qE5Ye95pWw5Lya4oCc6K6w5L2P4oCd5a6D5Yib5bu65pe255qE546v5aKD44CC6L+Z6YeM55qE44CQ54us56uL5Y+Y6YeP44CR5Y+v5Lul55CG6Kej5Li677ya5Zyo5oiR5Lus5Yib5bu655qE5a2X6Z2i5L2c55So5Z+f5LiK5oyB57ut5a2Y5Zyo55qE5Y+Y6YePXHJcblxyXG5mdW5jdGlvbiBtYWtlQXJteSgpe1xyXG4gICAgdmFyIHNob290ZXMgPSBbXTtcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCAxMDsgaSsrKXtcclxuICAgICAgICB2YXIgc2hvb3RlID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgYWxlcnQoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNob290ZXMucHVzaChzaG9vdGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNob290ZXM7XHJcbn1cclxuXHJcbnZhciBhcm15ID0gbWFrZUFybXkoKTtcclxuY29uc29sZS5sb2coYXJteVswXSgpKTsvLzEwXHJcbmNvbnNvbGUubG9nKGFybXlbNV0oKSk7Ly8xMFxyXG4vKlxyXG7kuIrov7Dmg4XlhrXlh7rnjrDpl63ljIXplJnor6/vvJrlo7DmmI7kuIDkuKpzaG9vdGXlh73mlbDml7bvvIzliJvlu7rkuobkuIDkuKrpl63ljIXvvIzpgqPkuYjotYvlgLznu5lzaG9vdGXnmoTlh73mlbDpg73mmK/pl63ljIXjgILku5bku6zljIXlkKvoh6rouqvnmoTlh73mlbDlrprkuYnlubbkv53lrZjkuoZtYWtlQXJteeeahOS9nOeUqOWfn+eOr+Wig+OAglxyXG7miYDku6XvvIzkuIDlhbHliJvlu7rkuoYxMOS4qumXreWMhe+8jOiAjOS4lOS7luS7rOWFseS6q+WQjOS4gOS4queOr+Wig+OAguW9k3Nob290ZeWHveiiq+aJp+ihjOaXtu+8jOWHveaVsOS4reeahOW+queOr+W3sue7j+aJp+ihjOWujOavleOAgmnnmoTlgLzkuZ/lj5jkuLoxMC5cclxuKi9cclxuXHJcbi8vIOino+WGs+S4iui/sOmXrumimO+8jOWPr+S7peS9v+eUqOabtOWkmueahOmXreWMhSxcclxuLy8g5L2/55So6Ieq5omn6KGM5Ye95pWw5Yib5bu65LiA5Liq5paw55qE5L2c55So5Z+f546v5aKD77yM5Zyo5YW25Lit77yMaeaMh+WQkeeahOaYr+WvueW6lOeahOacn+acm+WAvOOAglxyXG5mdW5jdGlvbiBtYWtlQXJteTEoKXtcclxuICAgIHZhciBzaG9vdGVzID0gW107XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgMTA7IGkrKyl7XHJcbiAgICAgICAgKGZ1bmN0aW9uKGkpe1xyXG4gICAgICAgICAgICB2YXIgc2hvb3RlID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGkpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2hvb3Rlcy5wdXNoKHNob290ZSk7XHJcbiAgICAgICAgfSkoaSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2hvb3RlcztcclxufVxyXG5cclxudmFyIGFybXkgPSBtYWtlQXJteTEoKTtcclxuY29uc29sZS5sb2coYXJteVswXSgpKTsvLzBcclxuY29uc29sZS5sb2coYXJteVs1XSgpKTsvLzVcclxuXHJcbi8vIOmXreWMheWSjOmdmeaAgeWPmOmHj++8jOS9v+eUqOmXreWMheWPr+S7peWunueOsOWNleS+i+aooeW8j+eahOaViOaenOOAglxyXG4vLyDlnKh0eXBlc2NyaXB055qE57G75Lit6K6+572u6Z2Z5oCB5Y+Y6YePXHJcbmNsYXNzIENvdW50ZXIge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgX2NvdW50ZXIgPSAwO1xyXG4gICAgY29uc3RydWN0b3IoKXt9XHJcbiAgICBwcml2YXRlIF9jaGFuZ2VCeSh2YWwpe1xyXG4gICAgICAgIENvdW50ZXIuX2NvdW50ZXIgKz0gdmFsO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGluY3JlbWVudCgpe1xyXG4gICAgICAgIHRoaXMuX2NoYW5nZUJ5KDEpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGRlY3JlbWVudCgpe1xyXG4gICAgICAgIHRoaXMuX2NoYW5nZUJ5KC0xKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyB2bGF1ZSgpe1xyXG4gICAgICAgIHJldHVybiBDb3VudGVyLl9jb3VudGVyO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyDovazmjaLkuLpqYXZhc2NyaXB05Luj56CB55qE5pWI5p6c5piv77yaXHJcbi8qXHJcbnZhciBDb3VudGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIENvdW50ZXIoKSB7XHJcbiAgICB9XHJcbiAgICBDb3VudGVyLnByb3RvdHlwZS5fY2hhbmdlQnkgPSBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgQ291bnRlci5fY291bnRlciArPSB2YWw7XHJcbiAgICB9O1xyXG4gICAgQ291bnRlci5wcm90b3R5cGUuaW5jcmVtZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2NoYW5nZUJ5KDEpO1xyXG4gICAgfTtcclxuICAgIENvdW50ZXIucHJvdG90eXBlLmRlY3JlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9jaGFuZ2VCeSgtMSk7XHJcbiAgICB9O1xyXG4gICAgQ291bnRlci5wcm90b3R5cGUudmxhdWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIENvdW50ZXIuX2NvdW50ZXI7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvdW50ZXI7XHJcbn0oKSk7XHJcbkNvdW50ZXIuX2NvdW50ZXIgPSAwO1xyXG4qL1xyXG5cclxuLy8g5L2/55So6Zet5YyF5p2l5qih5ouf6Z2Z5oCB5bGe5oCnXHJcbnZhciBDb3VudGVyQ2xvc3VyZSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgX2NvdW50ZXIgPSAwO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNoYW5nZUJ5KHZhbCl7XHJcbiAgICAgICAgX2NvdW50ZXIgKz0gdmFsO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gQ291bnRlckNsb3N1cmUoKSB7fVxyXG5cclxuICAgIENvdW50ZXJDbG9zdXJlLnByb3RvdHlwZS5pbmNyZW1lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2hhbmdlQnkoMSk7XHJcbiAgICB9O1xyXG4gICAgQ291bnRlckNsb3N1cmUucHJvdG90eXBlLmRlY3JlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjaGFuZ2VCeSgtMSk7XHJcbiAgICB9O1xyXG4gICAgQ291bnRlckNsb3N1cmUucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBfY291bnRlcjtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ291bnRlckNsb3N1cmU7XHJcbn0oKSk7XHJcblxyXG4vLyDkuIrov7Dku6PnoIHkuK3vvIxDb3VudGVyQ2xvc3VyZeaehOmAoOWHveaVsO+8jOacrOi6q+WwseaYr+mXreWMheeahOS4gOmDqOWIhuOAguaJgOS7pe+8jOaJgOacieeahENvdW50ZXJDbG9zdXJl57G755qE5a6e5L6L6YO95YWx5Lqr5ZCM5LiA5Liq6Zet5YyF55qE5LiK5LiL5paH77yM6L+Z5bCx5oSP5ZGz552AY291bnRlcuWPmOmHj+WSjGNoYW5nZUJ55Ye95pWw5bCG5Lya6KGo546w5b6X5aaC5Y2V5L6L5LiA5qC344CCXHJcbi8vIOavlOWmgu+8mkNvdW50ZXJDbG9zdXJl57G75a6e5L6L5a+56LGhY291bnRlcl8x5ZKMY291bnRlcl8y5Lya5YWx5Lqr5ZCM5LiA5Liq5L2c55So5Z+f5LiL55qE5Y+Y6YeP5ZKM5pa55rOV77yM6L+Z6YeM5oyH55qE5pivY291bnRlcuWSjGNoYW5nZUJ544CCXHJcbnZhciBjb3VudGVyXzEgPSBuZXcgQ291bnRlckNsb3N1cmUoKTtcclxudmFyIGNvdW50ZXJfMiA9IG5ldyBDb3VudGVyQ2xvc3VyZSgpO1xyXG5jb25zb2xlLmxvZyhjb3VudGVyXzEudmFsdWUoKSkvLzBcclxuY29uc29sZS5sb2coY291bnRlcl8yLnZhbHVlKCkpLy8wXHJcblxyXG5jb3VudGVyXzEuaW5jcmVtZW50KCk7XHJcbmNvdW50ZXJfMS5pbmNyZW1lbnQoKTtcclxuXHJcbmNvbnNvbGUubG9nKGNvdW50ZXJfMS52YWx1ZSgpKS8vMlxyXG5jb25zb2xlLmxvZyhjb3VudGVyXzIudmFsdWUoKSkvLzIs5pyf5pyb5YC85piv77yaMFxyXG5cclxuY291bnRlcl8yLmRlY3JlbWVudCgpO1xyXG5cclxuY29uc29sZS5sb2coY291bnRlcl8xLnZhbHVlKCkpLy8xXHJcbmNvbnNvbGUubG9nKGNvdW50ZXJfMi52YWx1ZSgpKS8vMSzmnJ/mnJvlgLzmmK/vvJotMVxyXG5cclxuLy8g6Zet5YyF5qih5ouf57G755qE56eB5pyJ5oiQ5ZGYXHJcbi8v5rOo5oSP77ya6L+Z6YeMbWFrZXJDb3VudGVy5Ye95pWw5LiN5piv6Ieq5omn6KGM5Ye95pWw77yM6L+Z5qC377yM5q+P5qyh6LCD55So5Ye95pWw6YO95Lya5Yib5bu65LiA5Liq5paw55qEbWFDb3VudGVy55qE5a6e5L6L77yM5q+P5Liq5a6e5L6L6YO95YyF5ZCr5LiA5Liq5paw55qE6Zet5YyF44CC55Sx5LqO6Zet5YyF5LiK5LiL5paH5LiN6IO955u05o6l6K6/6Zeu5Yiw77yM5omA5Lul77yM5Y+v5Lul6K+05Y+Y6YePY291bnRlcuWSjGNoYW5nZUJ55Li656eB5pyJ5Y+Y6YePXHJcbnZhciBtYWtlckNvdW50ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgX2NvdW50ZXIgPSAwO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNoYW5nZUJ5KHZhbCl7XHJcbiAgICAgICAgX2NvdW50ZXIgKz0gdmFsO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gbWFDb3VudGVyKCkge31cclxuXHJcbiAgICBtYUNvdW50ZXIucHJvdG90eXBlLmluY3JlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjaGFuZ2VCeSgxKTtcclxuICAgIH07XHJcbiAgICBtYUNvdW50ZXIucHJvdG90eXBlLmRlY3JlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjaGFuZ2VCeSgtMSk7XHJcbiAgICB9O1xyXG4gICAgbWFDb3VudGVyLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gX2NvdW50ZXI7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIG5ldyBtYUNvdW50ZXIoKTtcclxufTtcclxuXHJcbnZhciBjb3VudGVyXzEgPSBtYWtlckNvdW50ZXIoKTtcclxudmFyIGNvdW50ZXJfMiA9IG1ha2VyQ291bnRlcigpO1xyXG5jb25zb2xlLmxvZyhjb3VudGVyXzEudmFsdWUoKSkvLzBcclxuY29uc29sZS5sb2coY291bnRlcl8yLnZhbHVlKCkpLy8wXHJcblxyXG5jb3VudGVyXzEuaW5jcmVtZW50KCk7XHJcbmNvdW50ZXJfMS5pbmNyZW1lbnQoKTtcclxuXHJcbmNvbnNvbGUubG9nKGNvdW50ZXJfMS52YWx1ZSgpKS8vMlxyXG5jb25zb2xlLmxvZyhjb3VudGVyXzIudmFsdWUoKSkvLzAiXX0=
